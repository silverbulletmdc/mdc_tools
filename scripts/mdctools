#! /usr/bin/env/python
import cv2
import os
import click

@click.group()
def main():
    pass


@main.command()
@click.option('-i', '--input-path')
@click.option('-o', '--output-path', default='')
def video2frame(input_path, output_path):
    if output_path == '':
        output_path = os.path.splitext(input_path)[0]
    os.makedirs(output_path, exist_ok=True)
    cap = cv2.VideoCapture(input_path)
    i = 0
    while True:
        ret, frame = cap.read()
        if ret:
            cv2.imwrite(f'{output_path}/{i}.png', frame)
            i = i + 1
        else:
            break
    print(f'Save to {output_path}')


if __name__ == '__main__':
    main()